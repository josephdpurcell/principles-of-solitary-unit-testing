<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Principles of Solitary Unit Testing</title>
    <meta name="description" content="Principles of Solitary Unit Testing">
    <meta name="author" content="Joseph D. Purcell">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="palantirnet-theme/css/styles.css" id="theme">
    <link rel="stylesheet" href="css/overrides.css" id="theme">

    <!-- Code syntax highlighting
    <link rel="stylesheet" href="lib/css/zenburn.css">
    -->

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'palantirnet-theme/css/print/pdf.css' : 'palantirnet-theme/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>
  <!-- Change body class to "dark" if you prefer a dark theme, or "light" if you'd rather have a light theme-->
  <body class="light">
    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">

        <!-- Introduction -->
        <section>
          <section class="title">
            <h1>Principles of<br>Solitary Unit Testing</h1>
            <!-- @todo i'm doing this for style, which is bad -->
            <h4>– DrupalCon Barcelona 2015 –</h4>
            <h3>by Joseph D. Purcell</h3>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h1>Who am I?</h1>
            <aside class="notes">
              <ul>
                <li>Engineer at Palantir, a full service web agency based in Chicago</li>
                <li>Part of web dev since 2003</li>
              </ul>
            </aside>
          </section>

          <section>
            <h1>Who are you?</h1>
            <aside class="notes">
              <ul>
                <li>You know unit testing</li>
                <li>You want to be better at it</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:120%;text-align:center;">
 29513736
·92842033
 _________

  ?
            </pre>

            <aside class="notes">
              <ul>
                <li>Multiply these numbers</li>
                <li>When you do, you go through a process to come to the right answer</li>
                <li>Marc Sanz set record doing 10 diff sets in 4.5 min (<a href="http://www.recordholders.org/en/list/memory.html#8x8">source</a>)</li>
              </ul>
            </aside>
          </section>

          <section>
            <!--
            <p>There's a lot more to arithmetic than computing numbers.</p>
            -->
            <p>Choosing the right numbers is the hard part of arithmetic,<br>not the computation itself.</p>
            <aside class="notes">
              <ul>
                <li>Do you want your engineers doing mental math calculating the dimesons of the lens on the Hubble?</li>
                <li>or pharmacist LD50?</li>
                <li>but cost-comparison of EVOO?</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:120%;text-align:center;">
write a bubble sort
            </pre>

            <aside class="notes">
              <ul>
                <li>you can write it for integers easy</li>
                <li>what are you sorting?</li>
                <li>why are you sorting?</li>
              </ul>
            </aside>
          </section>

          <section>
            <p>Choosing the right problem to solve is the hard part of writing software,<br>not the keystrokes.</p>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <p>Solitary unit testing facilitates better software design.</p>
            <aside class="notes">
              <ul>
                <li>...because it gives a framework to think about the "right" problems</li>
                <li>This is the thesis.</li>
                <li>We will look at how it does that later.</li>
              </ul>
            </aside>
          </section>

          <section>
            <h1>Overview</h1>
            <ol style="list-style-type:upper-roman">
              <li>Definition</li>
              <li>Principles</li>
              <li>Test&nbsp;Smells</li>
              <li>Motivations</li>
            </ol>
            <aside class="notes">
            </aside>
          </section>
        </section>

<!--
===============================================================================
               Part I. Definition of Solitary Unit Test
===============================================================================
-->

        <section>
          <section>
            <h2>I. Definition</h2>
            <aside class="notes">
              Problem: many definitions of what unit test is and you may not know solitary vs sociable.
            </aside>
          </section>

          <section>
            <h3>What is a "unit test"?</h3>
            <aside class="notes">
              <ul>
                <li>WikiPedia is most often quoted; but really? that's the best we can do?</li>
                <li>Let's be more careful about definition</li>
              </ul>
            </aside>
          </section>

          <!--
          <section>
            <blockquote>
            "unit testing is a software testing method by which individual units of source code, sets of one or more computer program modules together with associated control data, usage procedures, and operating procedures, are tested to determine whether they are fit for use. Intuitively, one can view a unit as the smallest testable part of an application."
            <p class="attribution">&mdash; <a href="https://en.wikipedia.org/wiki/Unit_testing">wikipedia.com</a></p>
            </blockquote>
            <aside class="notes">
              WikiPedia is most often quoted; but really? that's the best we can do?
            </aside>
          </section>
          -->

          <section>
            <blockquote>
            "[I]t's a situational thing - the team decides what<br>
            makes sense to be a unit for the purposes of their<br>
            understanding of the system and its testing."
            <p class="attribution">&mdash; Martin Fowler, <a href="http://martinfowler.com/bliki/UnitTest.html">martinfowler.com</a></p>
            </blockquote>
            <aside class="notes">
              This does get at the heart of how to approach it, but it's nothing you can build definitions on.
            </aside>
          </section>

          <section>
            <p>A unit test verifies a function's correctness against a specification.</p>
            <aside class="notes">
              <ul>
                <li>it meets all interpretations</li>
                <li>"verify" is true to roots: formal verification</li>
                <li>function = constructor, method, or function</li>
                <li>there is nothing you can unit test that could not be described by this definition</li>
                <li>@todo is there a better word than "function"? maybe subroutine?</li>
              </ul>
            </aside>
          </section>

          <section>
            <p>There are two challenges with unit testing:</p>
            <ol style="width:40%">
              <li>indirect inputs (shared state)</li>
              <li>indirect outputs (side effects)</li>
            </ol>
            <aside class="notes">
              <ul>
                <li>shared state: globals, env vars, db, fs, net</li>
                <li>side effects: collaborators, db, fs, net</li>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Test Doubles</h3>
            <dl>
              <dt>Dummy</dt>
                <dd>never called</dd>
              <dt>Fake</dt>
                <dd>is called</dd>
              <dt>Stub</dt>
                <dd>provide indirect inputs</dd>
              <dt>Spy</dt>
                <dd>(optionally) provide indirect inputs, capture indirect outputs</dd>
              <dt>Mock</dt>
                <dd>(optionally) provide indirect inputs, verify indirect outputs</dd>
            </dl>
            <aside class="notes">
              <ul>
                <li>These are the tools to deal with indirection in the CUT.</li>
              </ul>
            </aside>
          </section>

          <section>
            <h3>What should you double?</h3>
            <aside class="notes">
              <ul>
                <li>this is the big question</li>
                <li>doubles smell of danger: over-specification in tests, slow tests, fragile tests</li>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Two Appraoches:<br>Sociable vs Solitary</h3>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Sociable</h3>
            <p>Any test that is not a solitary test.</p>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Solitary</h3>
            <blockquote>
            <ol>
              <li>Never cross boundaries</li>
              <li>The Class Under Test should be the only concrete class found in a test</li>
            </ol>
            <p class="attribution">&mdash; Jay Fields, "<a href="https://leanpub.com/wewut">Working Effectively With Unit Tests</a>"</p>
            </blockquote>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <blockquote>
              A boundary is "a database, a queue,<br>
              another system, or even an ordinary class<br>
              if that class is 'outside' the area your trying<br>
              to work with or are responsible for"
              <p class="attribution">&mdash; William E. Caputo, <a href="http://www.williamcaputo.com/archives/000019.html">www.williamcaputo.com</a></p>
            </blockquote>
            <aside class="notes">
              <ul>
                <li>@todo how to add a see also to Michael C. Feathers "Working Effectively With Legacy Code" concept of "Seams"</li>
              </ul>
            </aside>
          </section>

          <section>
            <p>A boundary is an indirect input or output.</p>
            <aside class="notes">
              <ul>
                <li>i.e. shared state or side effects</li>
                <li>@todo validate this is a good def</li>
              </ul>
            </aside>
          </section>

          <!--
          <section>
            <h3>What is a good solitary unit test?</h3>
            <aside class="notes">
              <ul>
                <li>@todo consider properties of good unit test "Art of Unit Testing" Roy Osherove pg 6</li>
                <li>@todo consider pillars of good tests "Art of Unit Testing" Roy Osherove pg 171</li>
              </ul>
            </aside>
          </section>

          <section>
            <p>A good solitary unit test gains ROI where a sociable test would not.</p>
            <aside class="notes">
              <ul>
                <li>The principles we are about to look at will help you evaluate ROI.</li>
              </ul>
            </aside>
          </section>

          <section>
            <blockquote>
              "Proving that code is correct is impractical.<br>
              Testing does not guarantee correctness.<br>
              However, good testing can minimize risk."
              <p class="attribution">&mdash; Robert C. Martin "<a href="http://www.objectmentor.com/resources/books.html">Clean Code</a>"</p>
            </blockquote>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <p>
              The advantage of solitary unit testing is that<br>
              the haystack is now a cotton ball.
            </p>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <h2>Questions?</h2>
            <aside class="notes">
              Pause for questions about the definition.
            </aside>
          </section>
          -->



<!--
Why is this important?
“If you want to refactor, the essential precondition is having solid tests.” pg 89

“Refactoring requires tests. If you want to refactor, you have to write tests.” pg 91

Martin Folwer Refactoring
-->

<!--
make a play on this about how sociable catches what solitary doesn't:

“How does one safely refactor? There are several options:
Trust your coding abilities.
Trust that your compiler will catch errors that you miss.
Trust that your test suite will catch errors that you and your compiler will miss.
Trust that code review will catch errors that you, your compiler, and your test suite miss.” Opdyke pg 391

-->

<!--
“Code at the boundaries needs clear separation and tests that define expectations.” pg 120
Robert C. Martin "Clean Code"
-->

        </section>

<!--
===============================================================================
              Part II. Principles of Solitary Unit Testing
===============================================================================
-->

        <section>
          <section>
            <h2>II. Principles</h2>
            <aside class="notes">
              So, now we know that solitary unit testing is awesome, how do we do it?
            </aside>
          </section>

          <section>
            <h3>Format of a Unit Test</h3>
            <dl>
              <dt>Arrange</dt>
                <dd>Arrange all necessary preconditions and inputs. </dd>
              <dt>Act</dt>
                <dd>Act on the object or method under test.</dd>
              <dt>Assert</dt>
                <dd>Assert that the expected results have occurred.</dd>
            </dl>
            <p>(Source: <a href="http://c2.com/cgi/wiki?ArrangeActAssert">c2.com</a>)</p>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Example 1: Drupal\Core\Batch\BatchStorage</h3>
            <pre style="font-size:75%">
              <code>
  public function load($id) {
    // Ensure that a session is started before using the CSRF token generator.
    $this->session->start();
    $batch = $this->connection->query("SELECT batch FROM {batch} WHERE bid = :bid AND token = :token", array(
      ':bid' => $id,
      ':token' => $this->csrfToken->get($id),
    ))->fetchField();
    if ($batch) {
      return unserialize($batch);
    }
    return FALSE;
  }
              </code>
            </pre>
            <aside class="notes">
              <ul>
                <li>We will test that session start was called</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:75%">
  public function test_load_starts_session() {
    $statement = $this->getMock(StatementInterface::class);
    $connection = $this->getMockBuilder(Connection::class)
        ->disableOriginalConstructor()
        ->getMock();
    $connection->method('query')->willReturn($statement);
    $session = $this->getMock(SessionInterface::class);
    <b>$session->expects($this->once())->method('start');</b>
    $csrf_token = $this->getMockBuilder(CsrfTokenGenerator::class)
        ->disableOriginalConstructor()
        ->getMock();
    $batch_storage = new BatchStorage($connection, $session, $csrf_token);

    $batch_storage->load(123);
  }
            </pre>
            <aside class="notes">
              <ul>
                <li>Problem is that we fail to assert last</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:75%">
  public function test_load_starts_session() {
    $prophet = new Prophet();
    $statement = $this->getMock(StatementInterface::class);
    $connection = $this->getMockBuilder(Connection::class)
        ->disableOriginalConstructor()
        ->getMock();
    $connection->method('query')->willReturn($statement);
    $session = $prophet->prophesize(SessionInterface::class);
    $csrf_token = $this->getMockBuilder(CsrfTokenGenerator::class)
        ->disableOriginalConstructor()
        ->getMock();
    $batch_storage = new BatchStorage($connection, $session->reveal(), $csrf_token);

    $batch_storage->load(123);

    <b>$session->start()->shouldHaveBeenCalled();</b>
  }
            </pre>
            <aside class="notes">
              <ul>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Example 2: <span style="font-size:78%">Drupal\Core\EventSubscriber\MaintenanceModeSubscriber</span></h3>
            <pre style="font-size:65%">
              <code>
  public function onKernelRequestMaintenance(GetResponseEvent $event) {
    $route_match = RouteMatch::createFromRequest($event->getRequest());
    if ($this->maintenanceMode->applies($route_match)) {
      \Drupal::service('page_cache_kill_switch')->trigger();
      if (!$this->maintenanceMode->exempt($this->account)) {
        drupal_maintenance_theme();
        $content = Xss::filterAdmin(SafeMarkup::format($this->config->get('system.maintenance')->get('message'), array(
          '@site' => $this->config->get('system.site')->get('name'),
        )));
        $response = $this->bareHtmlPageRenderer->renderBarePage(['#markup' => $content], $this->t('Site under maintenance'), 'maintenance_page');
        $response->setStatusCode(503);
        $event->setResponse($response);
      }
      else {
        if ($route_match->getRouteName() != 'system.site_maintenance_mode') {
          if ($this->account->hasPermission('administer site configuration')) {
            $this->drupalSetMessage($this->t('Operating in maintenance mode. <a href="@url">Go online.</a>', array('@url' => $this->urlGenerator->generate('system.                  site_maintenance_mode'))), 'status', FALSE);
          }
          else {
            $this->drupalSetMessage($this->t('Operating in maintenance mode.'), 'status', FALSE);
          }
        }
      }
    }
  }
              </code>
            </pre>
            <aside class="notes">
              <ul>
                <li>We will test that the maintenance page was set.</li>
                <li>Problem is, we can't test this.</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:65%">
              <code>
  public function onKernelRequestMaintenance(GetResponseEvent $event) {
    $route_match = RouteMatch::createFromRequest($event->getRequest());
    if ($this->maintenanceMode->applies($route_match)) {
      //\Drupal::service('page_cache_kill_switch')->trigger();
      if (!$this->maintenanceMode->exempt($this->account)) {
        //drupal_maintenance_theme();
        $content = Xss::filterAdmin(SafeMarkup::format($this->config->get('system.maintenance')->get('message'), array(
          '@site' => $this->config->get('system.site')->get('name'),
        )));
        $response = $this->bareHtmlPageRenderer->renderBarePage(['#markup' => $content], $this->t('Site under maintenance'), 'maintenance_page');
        $response->setStatusCode(503);
        $event->setResponse($response);
      }
      else {
        if ($route_match->getRouteName() != 'system.site_maintenance_mode') {
          if ($this->account->hasPermission('administer site configuration')) {
            $this->drupalSetMessage($this->t('Operating in maintenance mode. <a href="@url">Go online.</a>', array('@url' => $this->urlGenerator->generate('system.                  site_maintenance_mode'))), 'status', FALSE);
          }
          else {
            $this->drupalSetMessage($this->t('Operating in maintenance mode.'), 'status', FALSE);
          }
        }
      }
    }
  }
              </code>
            </pre>
            <aside class="notes">
              <ul>
                <li>Comment out the kill switch trigger and drupal_maintenance_theme call</li>
                <li>We'll find solutions to those later</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:65%;word-wrap:normal;overflow:scroll;">
  public function test_applicable_page_sets_maintenance_page_response() {
    $prophet = new Prophet();
    $translation = $this->getMock(TranslationInterface::class);
    $url_generator = $this->getMock(UrlGeneratorInterface::class);
    $account = $this->getMock(AccountInterface::class);
    $maintenance_mode = $this->getMock(MaintenanceModeInterface::class);
    $maintenance_mode->method('applies')->willReturn(true);
    $config_factory = $this->getMock(ConfigFactoryInterface::class);
    $value_map = [
      ['system.maintenance', $config_factory],
      ['message', ''],
      ['system.site', $config_factory],
      ['message', ''],
    ];
    $config_factory->method('get')->will($this->returnValueMap($value_map));
    $response = $this->getMock(HtmlResponse::class);
    $bare_html_page_renderer = $this->getMock(BareHtmlPageRendererInterface::class);
    $bare_html_page_renderer->method('renderBarePage')->willReturn($response);
    $subscriber = new MaintenanceModeSubscriber($maintenance_mode, $config_factory, $translation, $url_generator, $account, $bare_html_page_renderer);
    $request = $this->getMock(Request::class);
    $request->attributes = $this->getMock(ParameterBag::class);
    $event = $prophet->prophesize(GetResponseEvent::class);
    $event->setResponse(Argument::cetera())->willReturn();
    $event->getRequest()->willReturn($request);

    $subscriber->onKernelRequestMaintenance($event->reveal());

    <b>$event->setResponse($response)->shouldHaveBeenCalled();</b>
  }
            </pre>
            <aside class="notes">
              <ul>
                <li>Problem is that we fail to assert last</li>
                <li>And there is a LOT of arranging we have to do, mostly around building HTML</li>
              </ul>
            </aside>
          </section>

          <section>
            <h3>Example 2 Revised: <span style="font-size:78%">Drupal\Core\EventSubscriber\MaintenanceModePageOverrideSubscriber</span></h3>
            <pre style="font-size:65%">
              <code>
  public function onKernelRequestMaintenance(GetResponseEvent $event) {
    $route_match = RouteMatch::createFromRequest($event->getRequest());
    if ($this->maintenanceMode->applies($route_match)) {
      if (!$this->maintenanceMode->exempt($this->account)) {
        $content = Xss::filterAdmin(SafeMarkup::format($this->config->get('system.maintenance')->get('message'), array(
          '@site' => $this->config->get('system.site')->get('name'),
        )));
        $response = $this->bareHtmlPageRenderer->renderBarePage(['#markup' => $content], 'Site under maintenance', 'maintenance_page');
        $response->setStatusCode(503);
        $event->setResponse($response);
      }
    }
  }
              </code>
            </pre>
            <aside class="notes">
              <ul>
                <li>Now, all this does is set the response if it's the maintenance page</li>
                <li>The class now has 4 dependencies instead of 6</li>
                <li>Recommendation: move it out to a service</li>
                <li>Let's see what our test looks like</li>
              </ul>
            </aside>
          </section>

          <section>
            <pre style="font-size:65%;word-wrap:normal;overflow:scroll;">
  public function test_applicable_page_sets_maintenance_page_response() {
    $prophet = new Prophet();
    $account = $this->getMock(AccountInterface::class);
    $maintenance_mode = $this->getMock(MaintenanceModeInterface::class);
    $maintenance_mode->method('applies')->willReturn(true);
    $maintenance_page = $this->getMock(MaintenanceModePageInterface::class);
    $response = $this->getMock(HtmlResponse::class);
    $maintenance_page->method('getResponse')->willReturn($response);
    $subscriber = new MaintenanceModePageOverrideSubscriber($maintenance_mode, $account, $maintenance_page);
    $request = $this->getMock(Request::class);
    $request->attributes = $this->getMock(ParameterBag::class);
    $event = $prophet->prophesize(GetResponseEvent::class);
    $event->setResponse(Argument::cetera())->willReturn();
    $event->getRequest()->willReturn($request);

    $subscriber->onKernelRequestMaintenance($event->reveal());

    $event->setResponse($response)->shouldHaveBeenCalled();
  }
            </pre>
            <aside class="notes">
              <ul>
                <li>Problem is that we fail to assert last</li>
                <li>And there is a LOT of arranging we have to do</li>
              </ul>
            </aside>
          </section>

        </section>

<!--
===============================================================================
              Part III. Solitary Unit Test Smells
===============================================================================
-->

        <section>
          <section>
            <h2>III. Test Smells</h2>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Assertion roullette</h3>
            <aside class="notes">
              Easy to do b/c mixing state + behavior verification
              Solution: one assert per test
              Solution: assert last
            </aside>
          </section>

          <section>
            <h3>Fragile Test</h3>
            test fails when SUT is changed in ways that do not affect the part the test is exercising
            <aside class="notes">
              Easy to do when there are side effects; but, this would happen anyway
            </aside>
          </section>

          <section>
            <h3>Obscure Test</h3>
            difficult to understand the test at a glance
            <aside class="notes">
              Easy to do when using lots of mocks; it's hard to tell what is getting called!
              Solution: improve our testing frameworks
              Solution: use ObjectMother or DataBuilder
              Solution: use custom assertions
              Solution: expect literals
              Solution: avoid use of setUp; use inline setup
            </aside>
          </section>

          <section>
            <h3>Test Code Duplication</h3>
            the same test code is repeated many times
            <aside class="notes">
              Easy to do when needing to build complex test doubles or state.
              Solution: Replace ObjectMother with DataBuilder
            </aside>
          </section>

          <section>
            <h3>High Test Maintaenance Cost</h3>
            too much effort is spent maintaining tests
            <aside class="notes">
              Solution: avoid implementation overspecification
              Solution: remove negative or low ROI tests
              @todo list types of tests to remove from "Why you are wasting your time with unit testing"
            </aside>
          </section>

          <section>
            <blockquote>
              "If it stinks, change it."
              <p class="attribution">&mdash; Grandma Beck, discussing child-rearing philosophy, "<a href="http://martinfowler.com/books/refactoring.html">Refactoring</a>"</p>
            </blockquote>
            <aside class="notes">
            </aside>
          </section>

        </section>

<!--
===============================================================================
            Part IV. Motivations for Solitary Unit Testing
===============================================================================
-->

        <section>
          <section>
            <h2>IV. Motivations</h2>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Solitary unit testing enables higher code coverage.</h3>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Solitary unit testing enables decoupling<br>testing the interface from implementation.</h3>
            <aside class="notes">
              You can test code that doesn't exist or is changing, as long as the interface doesn't change.
            </aside>
          </section>

          <section>
            <h3>Solitary unit testing is faster than sociable unit testing.</h3>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Solitary unit testing enables better software designs.</h3>
            <aside class="notes">
              Pure functions are inherently easier to test
            </aside>
          </section>

          <section>
            <blockquote>
              "Writing unit tests is reinventing functional programming<br>
              in non-functional languages."
              <p class="attribution">&mdash; Christian S., <a href="http://noss.github.io/2009/02/25/writing-unit-tests-is-reinventing-functional-programming-in-non-functional-languages.html">noss.github.io</a></p>
            </blockquote>
            <aside class="notes">
              Yes, we do away with indirect inputs and outputs; but, we don't do away with the benefits of OO.
            </aside>
          </section>

          <section>
            Pure functions still need tests.
            <aside class="notes">
            </aside>
          </section>

          <section>
            <blockquote>
              "It should not be underestimated how much easier these functions are to test than their state-filled counterparts."
              <p class="attribution">&mdash; Simon Honeywell, "<a href="http://www.functionalphp.com/">Functional Programming in PHP</a>"</p>
            </blockquote>
            <aside class="notes">
            </aside>
          </section>

        </section>

<!--
===============================================================================
                          Thank You!
===============================================================================
-->

        <section>
          <section>
            <h2>Thank You!</h2>
            <p>Slides are available at: <a href="https://github.com/josephdpurcell/principles-of-solitary-unit-testing">github.com/josephdpurcell/principles-of-solitary-unit-testing</a>
            <aside class="notes">
            </aside>
          </section>

          <section>
            <h2>Sprint: Friday</h2>
            <div style="width:49%;float:left;">
              <ul>
                <li>Sprint with the Community on Friday.</li>
                <li>We have tasks for every skillset.</li>
                <li>Mentors are available for new contributors.</li>
                <li>An optional Friday morning workshop for first-time sprinters will help you get set up.</li>
                <li>Follow @drupalmentoring.</li>
              </ul>
            </div>
            <div style="width:49%;float:right;">
              <img src="/assets/sprint-friday.png">
              <p>Source: <a href="https://www.flickr.com/photos/amazeelabs/9965814443/in/faves-38914559@N03/">flickr.com/photos/amazeelabs</a></p>
            </div>
            <aside class="notes">
            </aside>
          </section>

          <section data-background="/assets/what-did-you-think.png">
            <a href="https://events.drupal.org/barcelona2015/sessions/principles-solitary-unit-testing" style="width:1280px;height:760px;display:block;z-index:999;">&nbsp;</a>
          </section>

          <section>
            <h3>References</h3>

            <ol>
              <li>"<a href="http://www.recordholders.org/en/list/memory.html#8x8">Mental Calculation World Ranking Lists</a>", Marc Jornet Sanz multiplying 8-digit numbers</li>
              <!--
              <li>"<a href="https://en.wikipedia.org/wiki/Unit_testing">Unit Testing</a>", WikiPedia</li>
              -->
              <li>"<a href="http://martinfowler.com/bliki/UnitTest.html">UnitTest</a>", Martin Fowler</li>
              <li>"<a href="https://leanpub.com/wewut">Working Effectively With Unit Tests</a>", Jay Fields</li>
              <li>"<a href="http://www.williamcaputo.com/archives/000019.html">TDD Pattern: Do not cross boundaries</a>", William E. Caputo</li>
              <li>"<a href="http://www.objectmentor.com/resources/books.html">Clean Code</a>", Robert C. Martin</li>
              <li>"<a href="http://martinfowler.com/books/refactoring.html">Refactoring</a>", Martin Fowler</li>
              <li>"<a href="http://c2.com/cgi/wiki?ArrangeActAssert">Arrange Act Assert</a>", Ward Cunningham</p>
              <li>"<a href="http://noss.github.io/2009/02/25/writing-unit-tests-is-reinventing-functional-programming-in-non-functional-languages.html">Writing unit tests is reinventing functional programming in non-functional languages</a>", Christian S.</li>
              <li>"<a href="http://www.functionalphp.com/">Functional Programming in PHP</a>", Simon Honeywell</li>
            </ol>

            <aside class="notes">
            </aside>
          </section>

          <section>
            <h3>Further Reading</h3>

            <ol>
              <li>See list of references.</li>
              <li>"<a href="http://martinfowler.com/bliki/ObjectMother.html">Object Mother</a>", Martin Fowler</li>
              <li>"<a href="http://www.natpryce.com/articles/000714.html">Test Data Builders: an alternative to the Object Mother pattern</a>", Nat Pryce</li>
              <li>"<a href="http://martinfowler.com/articles/mocksArentStubs.html">Mocks Aren't Stubs</a>", Martin Fowler</li>
              <li>"<a href="http://googletesting.blogspot.com/search/label/TotT">Google testing blog</a>"</li>
              <li>"<a href="http://jawspeak.com/2011/07/16/improving-developers-enthusiasm-for-unit-tests-using-bubble-charts/">Improving developers enthusiasm for unit tests, using bubble charts</a>", Jonathan Andrew Wolter</li>
              <li>"<a href="http://www.rbcs-us.com/documents/Why-Most-Unit-Testing-is-Waste.pdf">Why Most Unit Testing is Waste</a>", James O. Coplien</li>
              <li>"<a href="http://deliberate-software.com/dont-mock-concrete-classes/">Don't Mock Concrete Classes</a>", Steve Shogren</li>
              <li>"<a href="http://xunitpatterns.com/">XUnit Test Patterns</a>", George Mezaros</li>
              <li>"Working Effectively with Legacy Code", Michael C. Feathers</li>
              <li>"<a href="http://butunclebob.com/ArticleS.UncleBob.PrinciplesOfOod">The Principles of OOD</a>", Robert C. Martin</li>
              <li>"<a href="https://mike-bland.com/2012/08/16/oop-revisited.html">Object-Oriented Programming Revisited</a>", Mike Bland</li>
              <li>"<a href="http://martinfowler.com/articles/testing-culture.html">Goto Fail, Heartbleed, and Unit Testing Culture</a>", Martin Fowler</li>
              <li>"<a href="http://www.dwheeler.com/essays/heartbleed.html">How to Prevent the next Heartbleed</a>", David A. Wheeler</li>
              <li>"<a href="http://motherboard.vice.com/read/how-is-critical-life-or-death-software-tested">How Is Critical 'Life or Death' Software Tested?</a>", Michael Byrne</li>
              <li>"<a href="http://www.johndcook.com/blog/2010/05/18/pure-functions-have-side-effects/">Pure functions have side-effects</a>", John D. Cook</li>
              <li>"<a href="http://blog.stevensanderson.com/2009/08/24/writing-great-unit-tests-best-and-worst-practises/">Writing Great Unit Tests: Best and Worst Practices</a>", Steve Sanderson</li>
            </ol>

            <aside class="notes">
            </aside>
          </section>
        </section>


      </div><!-- /.slides -->

      <footer class="footer">
        <a class="logo-wrapper" href="https://www.palantir.net/" title="Link to Palantir.net's website">
          <div class="logo">
            <p>Palantir.net</p>
          </div>
        </a>
      </footer>
    </div><!-- /.reveal -->

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'plugin/zoom-js/zoom.js', async: true },
          { src: 'plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
